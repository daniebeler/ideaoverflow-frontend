<ion-content>
  <ion-grid class="container" style="margin-top: 30px; margin-bottom: 30px;" *ngIf="user">

    <ion-row>
      <ion-col>
        <h1>Favourite Color</h1>
      </ion-col>
    </ion-row>
    <ion-row style="padding-bottom: 30px">

      <ion-col *ngFor="let color of colors" style="padding-bottom: 0;" size="auto">
        <span
        [ngStyle]="{'background-color': color}"
        [ngClass]="color === user.color ? 'dot-active' : 'dot'"
         (click)="updateColor(color)"></span>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col>
        <h1 style="padding-bottom: 20px;">General</h1>
      </ion-col>
    </ion-row>

    <ion-row style="margin-bottom: 50px;">
      <ion-col style="display: flex;" class="ion-justify-content-center">
        <div class="profile-pic-div">
          <img [src]="user.profileimage" id="photo">
          <input type="file" id="file" accept=".png,.jpg," (change)="onFileChange($event)">
          <label for="file" id="uploadBtn">Change</label>
        </div>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size-xs="12" size-sm="6">
        <div class="form-group">
          <label class="text-label" for="fname"><strong>First Name</strong></label>
          <input type="text" name="fname" id="fname" placeholder="First Name" [(ngModel)]="user.firstname"
            (ngModelChange)="checkForChange()" />
        </div>
      </ion-col>
      <ion-col size-xs="12" size-sm="6">
        <div class="form-group">
          <label class="text-label" for="email"><strong>Last Name</strong></label>
          <input type="text" name="lname" id="lname" placeholder="Last Name" [(ngModel)]="user.lastname"
            (ngModelChange)="checkForChange()" />
        </div>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size-xs="12" size-sm="6">
        <div class="form-group" *ngIf="countries">
          <label class="text-label"><strong>Country</strong></label>
          <select [(ngModel)]="country" (ngModelChange)="checkForChange()">
            <option value="">--Leave empty--</option>
            <option *ngFor="let country of countries.countries" [ngValue]="user.country">{{user.country}}</option>
          </select>
        </div>
      </ion-col>
      <ion-col size-xs="12" size-sm="6">
        <div class="form-group" *ngIf="country">
          <label class="text-label"><strong>State</strong></label>
          <select [(ngModel)]="user.state" (ngModelChange)="checkForChange()">
            <option value="">--Leave empty--</option>
            <option *ngFor="let state of country.states" [ngValue]="user.state">{{user.state}}</option>
          </select>
        </div>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col>
        <h1>Social</h1>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col style="padding-bottom: 0;">
        <div class="form-group">
          <label class="text-label" for="fname"><strong>Bio</strong></label>
          <textarea style="resize: none;" rows="5" type="text" name="fname" id="fname"
            placeholder="Something about myself..." [(ngModel)]="user.bio"
            (ngModelChange)="checkForChange()"></textarea>
        </div>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col style="padding-top: 0;">
        <ion-grid style="padding: 0;">

          <ion-row>
            <ion-col style="padding: 0;">
              <div class="form-group">
                <label class="icon-label" for="password"><i>
                    <ion-icon name="logo-instagram"></ion-icon>
                  </i></label>
                <input class="icon-input" type="text" name="fname" id="fname" placeholder="Instagram username"
                  [(ngModel)]="user.instagram" (ngModelChange)="checkForChange()" />
              </div>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col style="padding: 0;">
              <div class="form-group">
                <label class="icon-label" for="password"><i>
                    <ion-icon name="logo-twitter"></ion-icon>
                  </i></label>
                <input class="icon-input" type="text" name="fname" id="fname" placeholder="Twitter username"
                  [(ngModel)]="user.twitter" (ngModelChange)="checkForChange()" />
              </div>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col style="padding: 0;">
              <div class="form-group">
                <label class="icon-label" for="password"><i>
                    <ion-icon name="logo-dribbble"></ion-icon>
                  </i></label>
                <input class="icon-input" type="text" name="fname" id="fname" placeholder="Dribbble username"
                  [(ngModel)]="user.dribbble" (ngModelChange)="checkForChange()" />
              </div>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col style="padding: 0;">
              <div class="form-group">
                <label class="icon-label" for="password"><i>
                    <ion-icon name="logo-github"></ion-icon>
                  </i></label>
                <input class="icon-input" type="text" name="fname" id="fname" placeholder="Github username"
                  [(ngModel)]="user.github" (ngModelChange)="checkForChange()" />
              </div>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col style="padding: 0;">
              <div class="form-group">
                <label class="icon-label" for="password"><i>
                    <ion-icon name="logo-linkedin"></ion-icon>
                  </i></label>
                <input class="icon-input" type="text" name="fname" id="fname" placeholder="LinkedIn username"
                  [(ngModel)]="user.linkedin" (ngModelChange)="checkForChange()" />
              </div>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col style="padding: 0;">
              <div class="form-group">
                <label class="icon-label" for="password"><i>
                    <ion-icon name="globe-outline"></ion-icon>
                  </i></label>
                <input class="icon-input" type="text" name="fname" id="fname" placeholder="https://example.com"
                  [(ngModel)]="user.website" (ngModelChange)="checkForChange()" />
              </div>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col>
        <h1 style="padding-bottom: 20px;">Change Password</h1>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size-xs="12" size-sm="6">
        <div class="form-group">
          <label class="icon-label" for="password"><i>
              <ion-icon name="lock-open"></ion-icon>
            </i></label>
          <input class="icon-input" type="password" name="passwort" id="password" placeholder="Current Password"
            [(ngModel)]="oldPassword" />
        </div>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size-xs="12" size-sm="6">
        <div class="form-group">
          <label class="icon-label" for="password"><i>
              <ion-icon name="lock-closed"></ion-icon>
            </i></label>
          <input class="icon-input" type="password" name="passwort" id="password" placeholder="New Password"
            [(ngModel)]="newPassword1" />
        </div>
      </ion-col>
      <ion-col size-xs="12" size-sm="6">
        <div class="form-group">
          <label class="icon-label" for="password"><i>
              <ion-icon name="lock-closed"></ion-icon>
            </i></label>
          <input class="icon-input" type="password" name="passwort" id="password" placeholder="New Password"
            [(ngModel)]="newPassword2" />
        </div>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <div class="row d-flex justify-content-center submit-button-container">
          <button type="button" class="btn-large btn-primary" style="margin-top: 10px;"
            (click)="changePassword()">Change
            Password</button>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>

<ion-footer>
  <ion-grid class="container">
    <ion-row>
      <ion-col style="display: flex; flex-direction: column; justify-content: center;">
        <button style="margin-top: 20px;" type="button" class="btn-small btn-primary" (click)="updateUser()"
          *ngIf="unsavedDataExists; else elseBlock">
          <span>Save changes</span>
        </button>

        <ng-template #elseBlock>
          <button style="margin-top: 20px;" type="button" class="btn-small btn-disabled" disabled>
            <span>Save changes</span>
          </button>
        </ng-template>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-footer>
